#!/bin/bash

echo "üéØ D√âPLOIEMENT FINAL - HolyPulse sur Render"
echo "=========================================="
echo ""

# V√©rifier que nous sommes dans le bon r√©pertoire
if [ ! -f "Dockerfile.render" ]; then
    echo "‚ùå Erreur: Dockerfile.render introuvable. √ätes-vous dans le bon r√©pertoire ?"
    exit 1
fi

echo "‚úÖ Configuration v√©rifi√©e:"
echo "   - Base de donn√©es: PostgreSQL (dpg-d15p3h2dbo4c73c2gsf0-a.frankfurt-postgres.render.com)"
echo "   - URL application: https://holypulse-projet.onrender.com"
echo "   - APP_KEY: base64:QmF0dGVyeUJlYXV0aWZ1bEVuZXJneTIwMjUhSG9seVB1bHNl"
echo "   - CORS: Configur√© pour holypulse-projet.onrender.com"
echo ""

echo "üìã √âTAPES DE D√âPLOIEMENT SUR RENDER:"
echo ""
echo "üî¥ BACKEND (Laravel API):"
echo "1Ô∏è‚É£  Aller sur https://dashboard.render.com"
echo "2Ô∏è‚É£  Cliquer sur 'New +' ‚Üí 'Web Service'"
echo "3Ô∏è‚É£  Connecter votre repository GitHub"
echo "4Ô∏è‚É£  Configuration du service backend:"
echo "    ‚Ä¢ Name: holypulse-backend"
echo "    ‚Ä¢ Region: Europe (Frankfurt)"
echo "    ‚Ä¢ Branch: master"
echo "    ‚Ä¢ Root Directory: (laisser vide)"
echo "    ‚Ä¢ Runtime: Docker"
echo "    ‚Ä¢ Dockerfile Path: ./Dockerfile"
echo ""
echo "üîµ FRONTEND (Vue.js Static):"
echo "1Ô∏è‚É£  Cr√©er un nouveau 'Static Site'"
echo "2Ô∏è‚É£  Configuration du frontend:"
echo "    ‚Ä¢ Name: holypulse-frontend"
echo "    ‚Ä¢ Branch: master"
echo "    ‚Ä¢ Root Directory: FRONT"
echo "    ‚Ä¢ Build Command: npm install && npm run build"
echo "    ‚Ä¢ Publish Directory: dist"
echo ""
echo "5Ô∏è‚É£  Variables d'environnement √† copier-coller:"
echo ""
echo "APP_NAME=HolyPulse"
echo "APP_ENV=production"
echo "APP_DEBUG=false"
echo "APP_URL=https://holypulse-projet.onrender.com"
echo "APP_KEY=base64:QmF0dGVyeUJlYXV0aWZ1bEVuZXJneTIwMjUhSG9seVB1bHNl"
echo "DATABASE_URL=postgresql://holy_user:0j3VsaVte2QSzolSgEfxdQnMN1Q2KFxu@dpg-d15p3h2dbo4c73c2gsf0-a.frankfurt-postgres.render.com/holy"
echo "DB_CONNECTION=pgsql"
echo "DB_HOST=dpg-d15p3h2dbo4c73c2gsf0-a.frankfurt-postgres.render.com"
echo "DB_PORT=5432"
echo "DB_DATABASE=holy"
echo "DB_USERNAME=holy_user"
echo "DB_PASSWORD=0j3VsaVte2QSzolSgEfxdQnMN1Q2KFxu"
echo "FRONTEND_URL=https://holypulse-projet.onrender.com"
echo "SANCTUM_STATEFUL_DOMAINS=holypulse-projet.onrender.com"
echo "SESSION_DOMAIN=.holypulse-projet.onrender.com"
echo ""
echo "6Ô∏è‚É£  Cliquer sur 'Create Web Service'"
echo ""
echo "üöÄ Le d√©ploiement va automatiquement:"
echo "   ‚úÖ Construire l'image Docker"
echo "   ‚úÖ Installer les d√©pendances PHP"
echo "   ‚úÖ Configurer Laravel"
echo "   ‚úÖ Ex√©cuter les migrations"
echo "   ‚úÖ D√©marrer l'application"
echo ""
echo "‚è±Ô∏è  Temps estim√©: 5-10 minutes"
echo ""
echo "üîó Une fois d√©ploy√©, votre API sera accessible √†:"
echo "   https://holypulse-projet.onrender.com"
echo ""
echo "üìä Pour v√©rifier que tout fonctionne:"
echo "   - https://holypulse-projet.onrender.com/api/health (si vous avez une route health)"
echo "   - V√©rifiez les logs dans le dashboard Render"
echo ""
echo "üéâ Votre application HolyPulse est pr√™te pour le d√©ploiement!"
