#!/bin/bash

echo "üîç DIAGNOSTIC ERROR 500 - HolyPulse"
echo "=================================="
echo ""

echo "‚úÖ CORRECTIONS APPLIQU√âES:"
echo "   ‚úì URL Vercel mise √† jour: holypulse-projet-l80s01nuw-belalbous-projects.vercel.app"
echo "   ‚úì Configuration CORS mise √† jour"
echo "   ‚úì APP_DEBUG=true pour voir les erreurs"
echo "   ‚úì Route / convertie en JSON (plus de vue 'welcome')"
echo "   ‚úì Routes de test ajout√©es"
echo ""

echo "üîÑ POUR RED√âPLOYER:"
echo "=================="
echo "1. Git add & commit:"
echo "   git add ."
echo "   git commit -m 'Fix: URL Vercel + debug routes + CORS'"
echo "   git push"
echo ""
echo "2. Red√©ployer sur Render (bouton Manual Deploy)"
echo ""

echo "üß™ TESTS √Ä FAIRE APR√àS RED√âPLOIEMENT:"
echo "====================================="
echo "1. Test route principale:"
echo "   https://holypulse-projet.onrender.com/"
echo "   ‚ûú Devrait retourner JSON avec 'HolyPulse API is running!'"
echo ""
echo "2. Test route sant√©:"
echo "   https://holypulse-projet.onrender.com/health"
echo "   ‚ûú Devrait retourner status 'ok'"
echo ""
echo "3. Test route API:"
echo "   https://holypulse-projet.onrender.com/api/test"
echo "   ‚ûú Devrait retourner 'API is working!'"
echo ""

echo "üí° SI ERREUR 500 PERSISTE:"
echo "=========================="
echo "V√©rifiez les logs Render pour voir l'erreur exacte:"
echo "Dashboard ‚Üí holypulse-backend ‚Üí Logs"
echo ""
echo "Erreurs possibles:"
echo "‚Ä¢ Probl√®me de permissions storage/"
echo "‚Ä¢ Erreur de base de donn√©es"
echo "‚Ä¢ Cl√© APP_KEY incorrecte"
echo "‚Ä¢ Extensions PHP manquantes"
echo ""

echo "üîß Variables d'environnement importantes √† v√©rifier:"
echo "=================================================="
echo "APP_DEBUG=true (temporaire pour voir les erreurs)"
echo "APP_KEY=base64:sTg0GqM5zrvI3duSC+VsTRi2L6o2weGfNW3BM6Mriqo="
echo "DATABASE_URL=postgresql://holy_user:..."
echo "FRONTEND_URL=https://holypulse-projet-l80s01nuw-belalbous-projects.vercel.app"
